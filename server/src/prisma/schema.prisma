generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model Player {
  id         String   @id @default(auto()) @map("_id") @db.ObjectId
  rank       String               // E, D, C, B, A, S, SS
  class      String?              // Backend, Frontend, etc.
  weaknesses String[]             // Aggregated weak areas
  createdAt  DateTime @default(now())

  @@index([rank])
}

model DungeonAttempt {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  playerId  String   @db.ObjectId

  rank      String
  class     String
  isBoss    Boolean @default(false)

  avgScore  Float   @default(0)
  passed    Boolean @default(false)

  weakAreas    String[]
  questionMeta Json

  createdAt DateTime @default(now())

  @@index([playerId])
  @@index([rank])
}
